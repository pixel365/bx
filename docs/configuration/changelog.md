# Changelog

Есть три способа включить описание релиза в дистрибутив:

- Включить в один из этапов сборки файл `description.ru`
- Использовать флаг `--description` для команды `build`
- Автоматически сгенерировать описание на основе коммитов.

В этом разделе описывается третий способ описания релиза, а именно секция `changelog`.

- `from` * &mdash; Начало истории изменений.
  - `type` * &mdash; Возможные значения: `tag`, `commit`
  - `value` * &mdash; Конкретный тэг или хэш коммита. В зависимости от того что указано в `type`.
- `to` * &mdash; Окончание истории изменений.
  - `type` * &mdash; Возможные значения: `tag`, `commit`
  - `value` * &mdash; Конкретный тэг или хэш коммита. В зависимости от того что указано в `type`.
- `condition` &mdash; Условие для включения или исключения коммитов при генерации истории изменений.
  - `type` ** &mdash; Возможные значения: `include`, `exclude`.
  - `value` ** &mdash; Список валидных регулярных выражений для фильтрации коммитов.
- `sort` &mdash; Сортировка коммитов. Возможные значения: `asc`, `desc`. По-умолчанию `asc`.
- `footerTemplate` &mdash; Текст, который будет добавлен в конец истории изменений. Например, предупреждение о необходимости предварительного создания резервной копии.

"*" &mdash; Обязательное поле.

"**" &mdash; Обязательное поле если присутствует родитель.

### Пример

```yaml
changelog:
  from:
    type: "tag"
    value: "v1.0.0"
  to:
    type: "tag"
    value: "v2.0.0"
  condition:
    type: "include"
    value:
      - '^feat:([\\W\\w]+)$'
      - '^fix:([\\W\\w]+)$'
  sort: "desc"
  footerTemplate: >
    Warning: This is a template message that is added 
    after the version description or commit list.
```

В данном примере будет сгенерирован файл description.ru, на основе истории изменений начиная с тэга v1.0.0 и заканчивая тэгом v2.0.0.

В список изменений попадут только те коммиты, текст которых начинается с `feat:` или `fix:`.

Они будут отсортированы в порядке убывания по тексту сообщения.

В конец описания будет добавлен текст: `Warning: This is a template message that is added after the version description or commit list.`

Итоговый description.ru будет выглядеть примерно так:

```text
fix: исправлена ошибка в компоненте XXX
fix: исправлена ошибка в компоненте YYY
feat: добавлена фича XXX
feat: добавлена фича YYY

Warning: This is a template message that is added after the version description or commit list.
```

Как итог, это описание релиза будет опубликовано в карточке модуля в 1С-Битрикс Маркетплейс.
